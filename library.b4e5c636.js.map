{"mappings":"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","sources":["src/js/library.js","src/js/fetchMovies.js"],"sourcesContent":["import { fetchMoviesTrending, fetchMoviesGenres, fetchMoviesByName, fetchMoviesById } from './fetchMovies.js';\n\nconst refs = {\n    moviesContainer: document.querySelector('.movies-cards-container'),\n\n    watchBtn: document.querySelector('#header-watched-button'),\n    queueBtn: document.querySelector('#header-queue-button'),\n    \n  };\n\nlet pageNumber = 1;\n\nlet genresArray = [];\n\nrenderLibraryMovies();\n\nexport function renderLibraryMovies() {\n    if (refs.watchBtn === null) {\n        return;\n    }\n    if (refs.watchBtn.classList.contains('is-header-active')) {\n    let watchedMovies = localStorage.getItem(\"watched-movies\");\n    let storageMoviesArray = watchedMovies.split(\",\");\n        \n    refs.moviesContainer.innerHTML = \"\";\n\n    for (movie of storageMoviesArray) {\n        console.log(movie);\n        fetchMoviesById(movie)\n            .then(renderChoosenMoviesCard)\n            .catch(onFetchError);\n    }\n    } else {\n            if (refs.queueBtn.classList.contains('is-header-active')) {\n    let queueMovies = localStorage.getItem(\"queue-movies\");\n    let storageMoviesArray = queueMovies.split(\",\");\n        \n    refs.moviesContainer.innerHTML = \"\";\n\n    for (movie of storageMoviesArray) {\n        console.log(movie);\n        fetchMoviesById(movie)\n            .then(renderChoosenMoviesCard)\n            .catch(onFetchError);\n    }\n}\n}\n}\n\n\nfetchMoviesGenres()\n  .then((genre) => {\n\n    for (let i = 0; i < genre.genres.length; i += 1) {\n      genresArray.push(genre.genres[i]);\n    }\n\n  });\n\nfunction genresById(genre_ids) {\n    console.log(genre_ids);\n  let resultstr = \"\";\n\n  for (let i = 0; i < genre_ids.length; i += 1) {\n        if (i >= 1) {\n          resultstr += \", \";\n        }\n\n        if (i >= 2) {\n          resultstr += \"Other\";\n          return resultstr;\n        }\n        \n        resultstr += genre_ids[i].name;\n      \n      } \n  \n  return resultstr;\n}\n\nfunction filmDate(release_date) {\n  let filmYearDate = new Date(release_date);\n  return filmYearDate.getFullYear();\n}\n\n\nfunction renderChoosenMoviesCard(movie) {\n\n    refs.moviesContainer.innerHTML += \n    `\n        <div class=\"movie-card\" >\n        <a href=\"\" class=\"movie-card-link\" data-modal-open data-id=\"${movie.id}\">\n            <img src=\"https://image.tmdb.org/t/p/w500/${movie.poster_path}\" alt=\"${movie.title}\" class=\"movie-card-img\" width = \"300px\">\n            <div class=\"movie-card-info-set\"> \n                <h3 class=\"movie-card-info-title\">${movie.title}</h3>\n                <div class=\"movie-card-info-details-set\">\n                  <p class=\"movie-card-info-genre\">${genresById(movie.genres)}</p>\n                  <p class=\"movie-card-info-genre\"> &nbsp; &#124; &nbsp; </p>\n                  <p class=\"movie-card-info-date\">${filmDate(movie.release_date)}</p>\n                </div>\n            </div>\n         </a>\n       \n        </div>\n    `;\n    \n}\n\n\nfunction onFetchError() {\n  refs.errorMessage.classList.remove('is-hidden');\n  setTimeout(() => {\n    refs.errorMessage.classList.add('is-hidden');\n  }, 2000);\n}\n\n","const BASE_URL = 'https://api.themoviedb.org/3/';\nconst MY_KEY = 'e09801b88bee36721ddccafeb1a578e0';\n\n\nexport function fetchMoviesTrending(pageNumber) {\n   \n    return fetch(`${BASE_URL}trending/movie/week?api_key=${MY_KEY}&page=${pageNumber}`)\n        .then(response => {\n            return response.json();\n        }\n  );\n}\n\nexport function fetchMoviesGenres() {\n   \n    return fetch(`${BASE_URL}genre/movie/list?api_key=${MY_KEY}`)\n        .then(response => {\n            return response.json();\n        }\n  );\n}\n\nexport function fetchMoviesByName(name, pageNumber) {\n\n    const searchName = name.replace(\" \", \"+\");\n\n    console.log(`${BASE_URL}search/movie?api_key=${MY_KEY}&query=${searchName}&page=${pageNumber}`);\n   \n    return fetch(`${BASE_URL}search/movie?api_key=${MY_KEY}&query=${searchName}&page=${pageNumber}`)\n        .then(response => {\n            return response.json();\n        }\n    );\n}\n\nexport function fetchMoviesById(movieId) {\n\n    console.log(`${BASE_URL}movie/${movieId}?api_key=${MY_KEY}`);\n   \n    return fetch(`${BASE_URL}movie/${movieId}?api_key=${MY_KEY}`)\n        .then(response => {\n            return response.json();\n        }\n        );\n}\n"],"names":["$kitKc","parcelRequire","$93effc6fc56091ad$var$refs","moviesContainer","document","querySelector","watchBtn","queueBtn","$93effc6fc56091ad$var$genresArray","$93effc6fc56091ad$export$50fa949290769984","classList","contains","storageMoviesArray","localStorage","getItem","split","innerHTML","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","movie","value","console","log","fetchMoviesById","then","$93effc6fc56091ad$var$renderChoosenMoviesCard","catch","$93effc6fc56091ad$var$onFetchError","err","return","storageMoviesArray1","_iteratorNormalCompletion1","_didIteratorError1","_iteratorError1","_step1","_iterator1","release_date","concat","id","poster_path","title","genre_ids","resultstr","i","length","name","$93effc6fc56091ad$var$genresById","genres","Date","getFullYear","errorMessage","remove","setTimeout","add","fetchMoviesGenres","genre","push","$ec6c8fa7e3d4acfc$var$BASE_URL","$ec6c8fa7e3d4acfc$var$MY_KEY","$ec6c8fa7e3d4acfc$export$435d5e7d4a23c51f","pageNumber","fetch","response","json","$ec6c8fa7e3d4acfc$export$f03f8f8d4d9c836f","$ec6c8fa7e3d4acfc$export$37a4223ecda5c4cf","searchName","replace","$ec6c8fa7e3d4acfc$export$9bbf2c609430497f","movieId"],"version":3,"file":"library.b4e5c636.js.map"}