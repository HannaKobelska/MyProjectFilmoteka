{"mappings":"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","sources":["src/js/modal.js"],"sourcesContent":["// import { renderLibraryMovies } from './library.js';\nimport { fetchMoviesById } from './fetchMovies.js';\n\n\n  const refs = {\n    openModalContainer: document.querySelector('.movies-cards-container'),\n    modalCloseBtn: document.querySelector('[data-modal-close]'),\n    modal: document.querySelector('[data-modal]'),\n    modalMovieCardContainer: document.querySelector('.movie-modal-card'),\n};\n  \nlet buttonWatchedStatus = 1;\nlet buttonQueueStatus = 1;\n\nlet movieId;\n\n  refs.openModalContainer.addEventListener('click', toggleModal);\n  refs.modalCloseBtn.addEventListener('click', closeByCross);\n  refs.modal.addEventListener('click', closeByBackdrop);\n\n\n  window.addEventListener('keydown', onEscKeyPress);\n\nfunction toggleModal(event) {\n    \n    event.preventDefault();\n\n    let elementOnClick = event.target.closest(\"a\");\n\n    if (elementOnClick) {\n      console.log(elementOnClick.getAttribute(`data-id`));\n      \n      movieId = elementOnClick.getAttribute(`data-id`);\n\n        document.body.classList.toggle(\"modal-open\");\n        refs.modal.classList.toggle('is-hidden');\n      \n      fetchMoviesById(movieId)\n        .then(renderMovieModalCard)\n        .catch(onFetchMoviesByIdError);\n      \n      \n      \n\n    }\n\n\n  }\n\n  function closeByCross() {\n    refs.modal.classList.add('is-hidden');\n    document.body.classList.remove(\"modal-open\");\n  }\n\n\n  function onEscKeyPress(event) {\n    if (event.code === 'Escape') {\n      refs.modal.classList.add('is-hidden');\n      document.body.classList.remove(\"modal-open\");\n    }\n  }\n\n  function closeByBackdrop(event) {\n    if (event.target === refs.modal) {\n      refs.modal.classList.add('is-hidden');\n      document.body.classList.remove(\"modal-open\");\n    }\n  }\n\nfunction onFetchMoviesByIdError() {\n  refs.modalMovieCardContainer.innerHTML = `Movie's info was not find!!! :-(  Sorry!!!`;\n}\n\nfunction renderMovieModalCard(movieInfo) {\n  console.log(movieInfo);\n\n  refs.modalMovieCardContainer.innerHTML = \n\n    `\n    <img src=\"https://image.tmdb.org/t/p/w500${movieInfo.poster_path}\" alt=\"${movieInfo.original_title}\" class=\"modal__img\" />\n\n        <div class=\"modal__info-block\">\n        \n        <ul class=\"modal__info discription__modal\">\n        <li class=\"discription__modal-item\">\n          <h4 class=\"discription__modal-title\">Vote / Votes</h4>\n          <p class=\"discription__modal-text\">\n            <span class=\"discription__modal-text-vote\">${movieInfo.vote_average}</span>\n            <span class=\"discription__modal-text-slash\">/</span>\n            <span class=\"discription__modal-text-votes\">${movieInfo.vote_count}</span>\n          </p>\n        </li>\n        <li class=\"discription__modal-item\">\n          <h4 class=\"discription__modal-title\">Popularity</h4>\n          <p class=\"discription__modal-text\">${movieInfo.popularity.toFixed(1)}</p>\n        </li>\n        <li class=\"discription__modal-item\">\n          <h4 class=\"discription__modal-title\">Original Title</h4>\n          <p class=\"discription__modal-text\">${movieInfo.original_title}</p>\n        </li>\n        <li class=\"discription__modal-item\">\n          <h4 class=\"discription__modal-title\">Genre</h4>\n          <p class=\"discription__modal-text\">FFFFFFFF</p>\n        </li>\n\n           <li class=\"modal__info about__modal\">\n      <h4 class=\"about__modal-title\">About</h4>\n      <p class=\"about__modal-text\">${movieInfo.overview}</p>\n    </li>\n      </ul>\n \n \n    <div class=\"modal-button-container\">\n      <button type=\"button\" class=\"modal-button\" id=\"modal-button-watched\">add to Watched</button>\n      <button type=\"button\" class=\"modal-button\" id=\"modal-button-queue\">add to Queue</button>\n    </div>\n  </div>\n   </div>\n   `;\n  \n  document.querySelector('#modal-button-watched').addEventListener('click', onButtonAddToWatched);\n  document.querySelector('#modal-button-queue').addEventListener('click', onButtonAddToQueue);\n  \n  if (checkLocalStorage(movieId, localStorage.getItem(\"watched-movies\"))) {\n  setButtonWatchedStatus(0);\n  } else {\n     setButtonWatchedStatus(1);\n  }\n \n   if (checkLocalStorage(movieId, localStorage.getItem(\"queue-movies\"))) {\n      setButtonQueueStatus(0);\n  } else {\n     setButtonQueueStatus(1);\n  }\n\n  }\n\nfunction onButtonAddToWatched(event) {\n  let buttonOne = document.querySelector('#modal-button-watched');\n\n  if (buttonWatchedStatus === 1) {\n    setButtonWatchedStatus(0);\n    setButtonQueueStatus(1);\n\n    // тут мы убераем из localStorage Queue и добавляем в localStorage Watched\n    const watchedMovies = localStorage.getItem(\"watched-movies\");\n    if (watchedMovies) {\n      if (checkLocalStorage(movieId, watchedMovies) === false) {\n          localStorage.setItem(\"watched-movies\", watchedMovies + \",\" + movieId);\n      }         \n    } else {\n      localStorage.setItem(\"watched-movies\", movieId);\n    }\n\n    const queueMovies = localStorage.getItem(\"queue-movies\");\n    if (checkLocalStorage(movieId, queueMovies) === true) {\n      localStorage.setItem(\"queue-movies\", removeIdLocalStorage(movieId, queueMovies));\n    }\n\n    // if (refs.openModalContainer.classList.contains('movies-cards-container-library')) {\n    //   renderLibraryMovies();\n    // }\n\n  } else {\n    setButtonWatchedStatus(1);\n    \n      const watchedMovies = localStorage.getItem(\"watched-movies\");\n      if (checkLocalStorage(movieId, watchedMovies) === true) {\n        localStorage.setItem(\"watched-movies\", removeIdLocalStorage(movieId, watchedMovies));\n    }\n\n    //  if (refs.openModalContainer.classList.contains('movies-cards-container-library')) {\n    //   renderLibraryMovies();\n    // }\n    \n  }\n\n}\n  \nfunction onButtonAddToQueue(event) {\n   let buttonTwo = document.querySelector('#modal-button-queue');\n\n   if (buttonQueueStatus === 1) {\n    setButtonWatchedStatus(1);\n     setButtonQueueStatus(0);\n     \n       // тут мы убераем из localStorage Watched  и добавляем в localStorage Queue\n    const queueMovies = localStorage.getItem(\"queue-movies\");\n    if (queueMovies) {\n      if (checkLocalStorage(movieId, queueMovies) === false) {\n          localStorage.setItem(\"queue-movies\", queueMovies + \",\" + movieId);\n      }           \n    } else {\n      localStorage.setItem(\"queue-movies\", movieId);\n     }\n     \n    const watchedMovies = localStorage.getItem(\"watched-movies\");\n      if (checkLocalStorage(movieId, watchedMovies) === true) {\n        localStorage.setItem(\"watched-movies\", removeIdLocalStorage(movieId, watchedMovies));\n     }\n     \n    //    if (refs.openModalContainer.classList.contains('movies-cards-container-library')) {\n    //   renderLibraryMovies();\n    // }\n\n   \n  } else {\n     setButtonQueueStatus(1);\n     \n    const queueMovies = localStorage.getItem(\"queue-movies\");\n    if (checkLocalStorage(movieId, queueMovies) === true) {\n      localStorage.setItem(\"queue-movies\", removeIdLocalStorage(movieId, queueMovies));\n     }\n     \n    //    if (refs.openModalContainer.classList.contains('movies-cards-container-library')) {\n    //   renderLibraryMovies();\n    // }\n    \n  }\n  \n\n}\n  \nfunction setButtonWatchedStatus(buttonStatus) {\nlet buttonOne = document.querySelector('#modal-button-watched');\n\n  if (buttonStatus === 0) {\n\n    buttonOne.innerHTML = \"remove from Watched\";\n    buttonWatchedStatus = 0;\n    buttonOne.classList.add('pressed');\n  } else {\n    buttonOne.innerHTML = \"add to Watched\";\n    buttonWatchedStatus = 1;\n    buttonOne.classList.remove('pressed');\n  }\n}\n\nfunction setButtonQueueStatus(buttonStatus) {\nlet buttonTwo = document.querySelector('#modal-button-queue');\n\n  if (buttonStatus === 0) {\n\n    buttonTwo.innerHTML = \"remove from Queue\";\n    buttonQueueStatus = 0;\n    buttonTwo.classList.add('pressed');\n  } else {\n    buttonTwo.innerHTML = \"add to Queue\";\n    buttonQueueStatus = 1;\n    buttonTwo.classList.remove('pressed');\n  }\n}\n\nfunction checkLocalStorage(movieId, storageMovies) {\n\n  if (storageMovies === null) {\n    return false;\n  }\n\n  let storageMoviesArray = storageMovies.split(\",\");\n  console.log(storageMoviesArray);\n\n  for (movie of storageMoviesArray) {\n    if (movie === movieId) {\n      return true;\n    } \n  }\n\n  return false;\n \n}\n\nfunction removeIdLocalStorage(movieId, storageMovies) {\n  let storageMoviesArray = storageMovies.split(\",\");\n\n  for (let i = 0; i < storageMoviesArray.length; i += 1) {\n    if (storageMoviesArray[i] === movieId) {\n      storageMoviesArray.splice(i, 1);\n      break;\n    } \n  }\n  return storageMoviesArray.join(\",\");\n\n}"],"names":["$1TPJ0","parcelRequire","$8a7e756c566dd1ea$var$refs","openModalContainer","document","querySelector","modalCloseBtn","modal","modalMovieCardContainer","$8a7e756c566dd1ea$var$movieId","$8a7e756c566dd1ea$var$buttonWatchedStatus","$8a7e756c566dd1ea$var$buttonQueueStatus","$8a7e756c566dd1ea$var$onFetchMoviesByIdError","innerHTML","$8a7e756c566dd1ea$var$renderMovieModalCard","movieInfo","console","log","poster_path","original_title","vote_average","vote_count","popularity","toFixed","overview","addEventListener","$8a7e756c566dd1ea$var$onButtonAddToWatched","$8a7e756c566dd1ea$var$onButtonAddToQueue","$8a7e756c566dd1ea$var$checkLocalStorage","localStorage","getItem","$8a7e756c566dd1ea$var$setButtonWatchedStatus","$8a7e756c566dd1ea$var$setButtonQueueStatus","event","watchedMovies","setItem","queueMovies","$8a7e756c566dd1ea$var$removeIdLocalStorage","buttonStatus","buttonOne","classList","add","remove","buttonTwo","movieId1","storageMovies","storageMoviesArray","split","movie","movieId2","i","length","splice","join","preventDefault","elementOnClick","target","closest","getAttribute","body","toggle","fetchMoviesById","then","catch","window","code"],"version":3,"file":"index.e670473b.js.map"}